---
Title: メンテナンスメッセージを一定期間だけ表示させるphpコード
Category:
- プログラム
Date: 2013-12-22T15:35:30+09:00
URL: https://blog.alfebelow.com/entry/2013/12/22/%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E4%B8%80%E5%AE%9A%E6%9C%9F%E9%96%93%E3%81%A0%E3%81%91%E8%A1%A8%E7%A4%BA%E3%81%95%E3%81%9B%E3%82%8Bph
---

**メンテのときにつかうやつ

>>
 システムメンテナンスのため、以下の期間はご利用いただけません  
 12/26(木) 00:00 ~ 1/5(日) 24:00
<<

みたいなよくあるメンテナンスメッセージ。  
(メンテナンス時間はフィクションです。実在の団体とは関係ありません。)

今回の目標は、これを表示させたい。  
そして、1/6(月)になったらWebページから見えなくなるようにしたい。  
メンテ終わりを見計らってメッセージ削除とかめんどくさい。

**phpのコード

というわけで、こんなコード作った。
>|php|
<?php
// メンテナンス用メッセージ 適当なタイミングで消してくだしあ(by alfe
$mente = <<<EOF
	<p>
	システムメンテナンスのため、以下の期間はご利用いただけません
	<br>12/26(木) 00:00 ~ 1/5(日) 24:00
	</p>
EOF;
	if (strtotime(date('Y-m-d')) <= strtotime('2014-1-5')) {
		echo $mente;
	}
// ここまで
?>
||<

これをメンテナンスメッセージが欲しいところに張り付ければOK

strtotimeは、日付だけでなく年もいれて比較した方が確実なので、  
年をまたがないときにも入れておくほうが吉。

**まとめ  
というコードを作ったのですが、貼り付けようと思ってたページがphp禁止で、
>||
<?php
||<
 が 
>||
<--<?php
||<
に勝手に変換され、すごく残念な思いをしたのでした。
